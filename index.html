<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>足球賠率篩選工具</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background:#f5f8fb; font-family:'Noto Sans TC', 'Microsoft JhengHei', Arial,sans-serif; color:#173e5d; margin:0; }
    .topbar { background:#2171c1; color:#fff; padding:24px 0 11px 0; text-align:center; border-radius:0 0 13px 13px; }
    .topbar h1 { font-size:2.1em; letter-spacing:2px; margin:0; font-weight:bold; }
    .topbar p { margin:6px 0 0 0; font-size:1.04em; color:#e2eaf7;}
    .tabbar {display:flex;justify-content:center;background:#eaf4fb;border-radius:12px 12px 0 0;margin-top:23px;}
    .tabbar button {flex:1 1 33%;padding:13px 0;font-size:1.12em;border:none;background:transparent;cursor:pointer;color:#2171c1;font-weight:bold;transition:.14s;}
    .tabbar button.active {background:#fff;border-bottom:3px solid #2171c1;color:#1666c1;}
    .ver-txt {text-align:center;margin:6px 0 13px 0;font-size:0.98em;color:#3377a8;}
    .page-wrap{max-width:880px;margin:0 auto;padding:0 4vw 36px 4vw;}
    .pane{display:none;}
    .pane.active{display:block;}

    /* 搜索區表單 */
    .search-box {background:#fff;border-radius:10px;padding:20px 18px 12px 18px;margin-bottom:12px;box-shadow:0 2px 9px #c3d8ef1a;}
    .search-title{font-weight:bold;color:#2171c1;margin-bottom:6px;}
    .form-row{display:flex;flex-wrap:wrap;gap:20px 24px;margin-bottom:6px;}
    .form-block{min-width:230px;}
    .form-label{display:block;font-weight:500;color:#19598a;margin-bottom:4px;}
    .form-sublabel{font-size:.98em;color:#5780a6;}
    .form-row input, .form-row select {
      border:1.3px solid #b7d5f3;padding:4px 9px;border-radius:5px;font-size:1.07em;width:94px;
      margin-left:4px;margin-right:7px;outline:none;background:#f8fcff;color:#175488;
    }
    .form-row select { width:110px; }
    .search-btn{margin:13px 0 0 0;background:#2171c1;color:#fff;border:none;border-radius:5px;padding:8px 24px;font-size:1.11em;cursor:pointer;box-shadow:0 1.5px 7px #b3c9ee24;}
    .search-btn:hover{background:#12559e;}

    /* 統計圓形圖 */
    .stat-box { display:flex;flex-wrap:wrap;align-items:center;gap:26px; background:#eef5fa;border-radius:12px;box-shadow:0 2px 10px #bfd6ef44;padding:14px 18px 11px 18px; margin-bottom:13px; border:1.5px solid #b7d5f3; }
    .stat-chart-row{display:flex;gap:22px;justify-content:left;align-items:center;}
    .stat-chart-item{text-align:center;min-width:68px;}
    .stat-label{margin:4px 0 0 0;font-size:0.98em;color:#1666c1;}
    .stat-num{font-size:1.06em;font-weight:bold;color:#22597f;}
    .stat-raw{margin-left:18px;color:#1a4067;font-size:.97em;}
    @media(max-width:900px){.stat-box{gap:14px;padding:13px 5vw 9px 5vw;}}
    @media(max-width:650px){.stat-box{flex-direction:column;gap:6px;padding:8px 2vw 7px 2vw;font-size:.99em;}
      .stat-chart-row{gap:11px;justify-content:flex-start;}
      .stat-chart-item{min-width:52px;}
      .stat-raw{margin-left:0;}
    }

    /* 比賽表格 */
    table { width:100%; border-collapse:collapse; margin-top:4px; background:#fff; }
    th, td { padding:5px 8px; border-bottom:1px solid #ddeaf7; text-align:center; font-size:1em;}
    th { background:#f4f8fd; color:#1762a3;font-weight:bold;font-size:1.08em;}
    tr:nth-child(even) { background:#f8fbfe; }
    .nowrap {white-space:nowrap;}
    @media(max-width:650px){
      th,td{font-size:0.95em;padding:4px 2px;}
      .page-wrap{padding:0 1vw 23px 1vw;}
    }
  </style>
</head>
<body>
  <div class="topbar">
    <h1>足球賠率篩選工具</h1>
    <p>根據初盤、終盤所有條件組合快速篩選比賽，並精確統計每一項百分比。</p>
  </div>
  <div class="page-wrap">
    <div class="tabbar">
      <button class="active" onclick="showTab(0)">亞洲盤查詢</button>
      <button onclick="showTab(1)">大小球查詢</button>
      <button onclick="showTab(2)">歐洲盤查詢</button>
    </div>
    <div class="ver-txt">版本時間：27/7/2025 下午<span id="vtime"></span> (GMT+8)</div>
    <!-- ======== Pane 1: 亞洲盤 ======= -->
    <div class="pane active">
      <form class="search-box" onsubmit="asianSearch();return false;">
        <div class="search-title">初盤</div>
        <div class="form-row">
          <div class="form-block">
            <label class="form-label">盤口</label>
            <select id="AHandicap"></select>
          </div>
          <div class="form-block">
            <label class="form-label">主隊賠率</label>
            <input id="AHOM" type="number" step="0.01" placeholder="最小值">－<input id="AHOX" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">客隊賠率</label>
            <input id="AAWM" type="number" step="0.01" placeholder="最小值">－<input id="AAWX" type="number" step="0.01" placeholder="最大值">
          </div>
        </div>
        <div class="search-title">終盤</div>
        <div class="form-row">
          <div class="form-block">
            <label class="form-label">盤口</label>
            <select id="AHandicapC"></select>
          </div>
          <div class="form-block">
            <label class="form-label">主隊賠率</label>
            <input id="AHOMC" type="number" step="0.01" placeholder="最小值">－<input id="AHOXC" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">客隊賠率</label>
            <input id="AAWMC" type="number" step="0.01" placeholder="最小值">－<input id="AAWXC" type="number" step="0.01" placeholder="最大值">
          </div>
        </div>
        <button class="search-btn" type="submit">搜尋</button>
      </form>
      <!-- 統計區（亞洲盤） -->
      <div class="stat-box" id="statAsianBox">
        <div class="stat-chart-row">
          <div class="stat-chart-item">
            <canvas id="asianPieWin" width="44" height="44"></canvas>
            <div class="stat-label">贏盤</div>
            <div class="stat-num" id="as_win"></div>
          </div>
          <div class="stat-chart-item">
            <canvas id="asianPieDraw" width="44" height="44"></canvas>
            <div class="stat-label">和盤</div>
            <div class="stat-num" id="as_draw"></div>
          </div>
          <div class="stat-chart-item">
            <canvas id="asianPieLose" width="44" height="44"></canvas>
            <div class="stat-label">輸盤</div>
            <div class="stat-num" id="as_lose"></div>
          </div>
        </div>
        <div class="stat-raw" id="asStatRaw"></div>
      </div>
      <table>
        <thead>
          <tr>
            <th>比賽日期</th><th>比賽</th><th>盤口變化</th><th>盤口勝負</th>
          </tr>
        </thead>
        <tbody id="aTbl"></tbody>
      </table>
    </div>
    <!-- ======== Pane 2: 大小球 ======= -->
    <div class="pane">
      <form class="search-box" onsubmit="overSearch();return false;">
        <div class="search-title">初盤</div>
        <div class="form-row">
          <div class="form-block">
            <label class="form-label">盤口</label>
            <select id="OULine"></select>
          </div>
          <div class="form-block">
            <label class="form-label">大球賠率</label>
            <input id="OUoMin" type="number" step="0.01" placeholder="最小值">－<input id="OUoMax" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">細球賠率</label>
            <input id="OUuMin" type="number" step="0.01" placeholder="最小值">－<input id="OUuMax" type="number" step="0.01" placeholder="最大值">
          </div>
        </div>
        <div class="search-title">終盤</div>
        <div class="form-row">
          <div class="form-block">
            <label class="form-label">大球賠率</label>
            <input id="OUoMinC" type="number" step="0.01" placeholder="最小值">－<input id="OUoMaxC" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">細球賠率</label>
            <input id="OUuMinC" type="number" step="0.01" placeholder="最小值">－<input id="OUuMaxC" type="number" step="0.01" placeholder="最大值">
          </div>
        </div>
        <button class="search-btn" type="submit">搜尋</button>
      </form>
      <!-- 統計區（大小球） -->
      <div class="stat-box" id="statOverBox">
        <div class="stat-chart-row">
          <div class="stat-chart-item">
            <canvas id="overPie" width="44" height="44"></canvas>
            <div class="stat-label">Over</div>
            <div class="stat-num" id="ov_num"></div>
          </div>
          <div class="stat-chart-item">
            <canvas id="underPie" width="44" height="44"></canvas>
            <div class="stat-label">Under</div>
            <div class="stat-num" id="un_num"></div>
          </div>
        </div>
        <div class="stat-raw" id="oStatRaw"></div>
      </div>
      <table>
        <thead>
          <tr>
            <th>比賽日期</th><th>比賽</th><th>盤口</th>
            <th>初盤大</th><th>初盤細</th><th>終盤大</th><th>終盤細</th><th>結果</th>
          </tr>
        </thead>
        <tbody id="oTbl"></tbody>
      </table>
    </div>
    <!-- ======== Pane 3: 歐洲盤 ======= -->
    <div class="pane">
      <form class="search-box" onsubmit="euroSearch();return false;">
        <div class="search-title">初盤</div>
        <div class="form-row">
          <div class="form-block">
            <label class="form-label">主勝</label>
            <input id="EHOM" type="number" step="0.01" placeholder="最小值">－<input id="EHOX" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">和局</label>
            <input id="EDRM" type="number" step="0.01" placeholder="最小值">－<input id="EDRX" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">客勝</label>
            <input id="EAWM" type="number" step="0.01" placeholder="最小值">－<input id="EAWX" type="number" step="0.01" placeholder="最大值">
          </div>
        </div>
        <div class="search-title">終盤</div>
        <div class="form-row">
          <div class="form-block">
            <label class="form-label">主勝</label>
            <input id="CEHOM" type="number" step="0.01" placeholder="最小值">－<input id="CEHOX" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">和局</label>
            <input id="CEDRM" type="number" step="0.01" placeholder="最小值">－<input id="CEDRX" type="number" step="0.01" placeholder="最大值">
          </div>
          <div class="form-block">
            <label class="form-label">客勝</label>
            <input id="CEAWM" type="number" step="0.01" placeholder="最小值">－<input id="CEAWX" type="number" step="0.01" placeholder="最大值">
          </div>
        </div>
        <button class="search-btn" type="submit">搜尋</button>
      </form>
      <!-- 統計區（歐洲盤） -->
      <div class="stat-box" id="statEuroBox">
        <div class="stat-chart-row">
          <div class="stat-chart-item">
            <canvas id="euroPieHome" width="44" height="44"></canvas>
            <div class="stat-label">主勝</div>
            <div class="stat-num" id="eu_home"></div>
          </div>
          <div class="stat-chart-item">
            <canvas id="euroPieDraw" width="44" height="44"></canvas>
            <div class="stat-label">和局</div>
            <div class="stat-num" id="eu_draw"></div>
          </div>
          <div class="stat-chart-item">
            <canvas id="euroPieAway" width="44" height="44"></canvas>
            <div class="stat-label">客勝</div>
            <div class="stat-num" id="eu_away"></div>
          </div>
        </div>
        <div class="stat-raw" id="eStatRaw"></div>
      </div>
      <table>
        <thead>
          <tr>
            <th>比賽日期</th><th>比賽</th>
            <th>初盤(主/和/客)</th><th>終盤(主/和/客)</th>
            <th>比分</th><th>勝負</th><th>淨勝球</th>
          </tr>
        </thead>
        <tbody id="eTbl"></tbody>
      </table>
    </div>
  </div>
  <script>
    // ====== TAB 切換 =======
    function showTab(i){
      document.querySelectorAll('.tabbar button').forEach((btn,j)=>btn.classList.toggle('active',j==i));
      document.querySelectorAll('.pane').forEach((p,j)=>p.classList.toggle('active',j==i));
    }
    // ====== 版本時間 =======
    function pad(n){return n<10?'0'+n:n;}
    const now = new Date(), y=now.getFullYear(), m=now.getMonth()+1, d=now.getDate();
    let hh=now.getHours(), mm=now.getMinutes(), ampm='下午';
    if(hh<12){ampm='上午';} else if(hh>12){hh=hh-12;}
    document.getElementById('vtime').textContent = `${hh}:${pad(mm)}`;

    // ====== (下面請根據你三個JSON/database數據源及原有查詢/統計邏輯粘貼和移植) ======
    // 1. 自動生成盤口下拉選單
    // 2. 查詢結果統計並呼叫 renderPieChart (如下)
    // 3. 比賽表格動態填充

    // ========== 統計圓圖 Chart.js ===============
    function renderPieChart(id, val, tot, color='#2171c1', base='#e4edf7'){
      return new Chart(document.getElementById(id), {
        type:'doughnut',
        data:{datasets:[{data:[val,Math.max(0,tot-val)],backgroundColor:[color,base]}]},
        options:{
          cutout:"74%",
          plugins:{
            legend:{display:!1},
            tooltip:{enabled:!1},
          },
          elements:{arc:{borderWidth:0}},
          animation:false
        }
      });
    }
    // Demo 用例（正式請用查詢後計算結果）
    // 亞洲盤例子：
    // renderPieChart('asianPieWin', 444, 1089, '#2171c1'); // 贏盤
    // renderPieChart('asianPieDraw', 252, 1089, '#269db2');
    // renderPieChart('asianPieLose', 393, 1089, '#e26a6a');
    // 大小球例子：
    // renderPieChart('overPie', 13500, 26792, '#2171c1');
    // renderPieChart('underPie', 13292, 26792, '#e2c531');
    // 歐洲盤例子：
    // renderPieChart('euroPieHome', 15729, 35966, '#2171c1');
    // renderPieChart('euroPieDraw', 9069, 35966, '#269db2');
    // renderPieChart('euroPieAway', 11168, 35966, '#e26a6a');

    // ======= 以下請你根據你原有數據查詢與渲染邏輯加返 =======
    // 你可以直接喺搜尋結果統計完成時呼叫renderPieChart
    // 再動態設置 .stat-num 裡面顯示嘅數值
    // 如果要清除/重畫 Pie Chart，Chart.js 提供 .destroy() 方法

    // *** 請根據你現有JSON/database查詢邏輯進行資料綁定 ***
  </script>
</body>
</html>

<!DOCTYPE html><html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>足球賠率篩選工具</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet"
 href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<style>
body{font-family:"PingFang TC","Microsoft JhengHei",sans-serif;font-size:15px}
.nav-tabs .nav-link{font-weight:600}
.row{--bs-gutter-x:.3rem;--bs-gutter-y:.3rem}
.row>label{width:70px;padding-left:0}
.input-wrap{display:flex;align-items:center}
.input-wrap>span{margin:0 .25rem}
input[type=number]{width:100px}
.step-group{display:inline-flex}
.step-group input{width:65px;text-align:right}
.step-group button{width:28px;font-size:.8rem}
fieldset{border:1px solid #ced4da;padding:.75rem;margin-bottom:1rem}
legend{font-size:1rem;width:auto;padding:0 .5rem}
.search{margin:1rem auto 0;display:block;padding:.4rem 3rem}
.stat-area{margin:.5rem 0;font-weight:600;font-size:1rem}
.table-wrap{overflow-x:auto}
table{min-width:640px;font-size:.88rem}
thead th{white-space:nowrap}
</style>
</head><body>

<div class="container-fluid py-2">
<h4 class="mb-3">足球賠率篩選工具</h4>

<ul class="nav nav-tabs" id="tabs">
  <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab"
     href="#tc0">亞洲盤查詢</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab"
     href="#tc1">大小球查詢</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab"
     href="#tc2">歐洲盤查詢</a></li>
</ul>

<div class="tab-content pt-3">

<!-- ═════ Tab0：亞洲盤 ═════ -->
<div id="tc0" class="tab-pane fade show active">
<form id="frmAh">
<fieldset><legend>初盤</legend>
  <div class="row"><label>盤口：</label><div class="input-wrap">
    <select id="AH_open_hand"><option value="">--</option></select></div></div>

  <div class="row"><label>主隊賠率：</label><div class="input-wrap">
    <input id="AH_oh_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span>
    <div class="step-group">
      <input id="AH_oh_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('AH_oh_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('AH_oh_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>客隊賠率：</label><div class="input-wrap">
    <input id="AH_oa_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span>
    <div class="step-group">
      <input id="AH_oa_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('AH_oa_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('AH_oa_err',-0.05)">▼</button>
    </div></div></div>
</fieldset>

<fieldset><legend>終盤</legend>
  <div class="row"><label>盤口：</label><div class="input-wrap">
    <select id="AH_close_hand"><option value="">--</option></select></div></div>

  <div class="row"><label>主隊賠率：</label><div class="input-wrap">
    <input id="AH_ch_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span>
    <div class="step-group">
      <input id="AH_ch_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('AH_ch_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('AH_ch_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>客隊賠率：</label><div class="input-wrap">
    <input id="AH_ca_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span>
    <div class="step-group">
      <input id="AH_ca_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('AH_ca_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('AH_ca_err',-0.05)">▼</button>
    </div></div></div>
</fieldset>
<button type="button" class="search btn btn-primary" onclick="asianSearch()">搜尋</button>
</form>
<div id="ahStat" class="stat-area"></div>
<div class="table-wrap"><table id="ahTbl" class="table table-striped table-sm"><thead></thead><tbody></tbody></table></div>
</div><!-- /tc0 -->

<!--  ★  Tab1：大小球（完整）  ★ -->
<div id="tc1" class="tab-pane fade">
<form id="frmOu">
<fieldset><legend>初盤</legend>
  <div class="row"><label>盤口：</label><div class="input-wrap">
    <select id="OU_open_line"><option value="">--</option></select></div></div>

  <div class="row"><label>大球賠率：</label><div class="input-wrap">
    <input id="OU_oo_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="OU_oo_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('OU_oo_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('OU_oo_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>細球賠率：</label><div class="input-wrap">
    <input id="OU_ou_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="OU_ou_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('OU_ou_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('OU_ou_err',-0.05)">▼</button>
    </div></div></div>
</fieldset>

<fieldset><legend>終盤</legend>
  <div class="row"><label>盤口：</label><div class="input-wrap">
    <select id="OU_close_line"><option value="">--</option></select></div></div>

  <div class="row"><label>大球賠率：</label><div class="input-wrap">
    <input id="OU_co_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="OU_co_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('OU_co_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('OU_co_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>細球賠率：</label><div class="input-wrap">
    <input id="OU_cu_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="OU_cu_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('OU_cu_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('OU_cu_err',-0.05)">▼</button>
    </div></div></div>
</fieldset>
<button type="button" class="search btn btn-primary" onclick="ouSearch()">搜尋</button>
</form>
<div id="ouStat" class="stat-area"></div>
<div class="table-wrap"><table id="ouTbl" class="table table-striped table-sm"><thead></thead><tbody></tbody></table></div>
</div><!-- /tc1 -->

<!--  ★  Tab2：歐洲盤（完整）  ★ -->
<div id="tc2" class="tab-pane fade">
<form id="frmEu">
<fieldset><legend>初盤</legend>
  <div class="row"><label>主勝：</label><div class="input-wrap">
    <input id="EU_oh_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="EU_oh_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('EU_oh_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('EU_oh_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>和局：</label><div class="input-wrap">
    <input id="EU_od_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="EU_od_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('EU_od_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('EU_od_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>客勝：</label><div class="input-wrap">
    <input id="EU_oa_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="EU_oa_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('EU_oa_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('EU_oa_err',-0.05)">▼</button>
    </div></div></div>
</fieldset>

<fieldset><legend>終盤</legend>
  <div class="row"><label>主勝：</label><div class="input-wrap">
    <input id="EU_ch_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="EU_ch_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('EU_ch_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('EU_ch_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>和局：</label><div class="input-wrap">
    <input id="EU_cd_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="EU_cd_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('EU_cd_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('EU_cd_err',-0.05)">▼</button>
    </div></div></div>

  <div class="row"><label>客勝：</label><div class="input-wrap">
    <input id="EU_ca_exact" type="number" step="0.01" placeholder="精確">
    <span>±</span><div class="step-group">
      <input id="EU_ca_err" type="number" step="0.05" value="0.05">
      <button type="button" onclick="adjErr('EU_ca_err',0.05)">▲</button>
      <button type="button" onclick="adjErr('EU_ca_err',-0.05)">▼</button>
    </div></div></div>
</fieldset>
<button type="button" class="search btn btn-primary" onclick="euroSearch()">搜尋</button>
</form>
<div id="euStat" class="stat-area"></div>
<div class="table-wrap"><table id="euTbl" class="table table-striped table-sm"><thead></thead><tbody></tbody></table></div>
</div><!-- /tc2 -->

</div><!-- /.tab-content -->
</div><!-- /.container -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<script>
/* ===== 共用 ===== */
function adjErr(id,d){const e=document.getElementById(id);let v=parseFloat(e.value)||0;v=Math.max(0,(v+d).toFixed(2));e.value=v.toFixed(2);}
function rng(eid,errid){const x=parseFloat(document.getElementById(eid).value);const er=parseFloat(document.getElementById(errid).value)||0;return isNaN(x)?[null,null]:[x-er,x+er];}
function pct(n,t){return t? (100*n/t).toFixed(1)+'%':'0%'}

/* ===== 資料載入 ===== */
let AH=[],OU=[],EU=[];
Promise.all([
 fetch('asian_handicap.json').then(r=>r.json()).then(d=>AH=d),
 fetch('over_under.json').then(r=>r.json()).then(d=>OU=d),
 fetch('european_odds.json').then(r=>r.json()).then(d=>EU=d)
]).then(()=>initSelect());

function initSelect(){
  // AH
  const hSet=new Set(AH.map(r=>r.AH_open_handicap)), opts=['<option value="">--</option>'];
  [...hSet].sort((a,b)=>a-b).forEach(v=>opts.push(`<option>${v}</option>`));
  document.getElementById('AH_open_hand').innerHTML=opts.join('');
  document.getElementById('AH_close_hand').innerHTML=opts.join('');
  // OU
  const oSet=new Set(OU.map(r=>r.OU_open_line)), oOpt=['<option value="">--</option>'];
  [...oSet].sort((a,b)=>a-b).forEach(v=>oOpt.push(`<option>${v}</option>`));
  document.getElementById('OU_open_line').innerHTML=oOpt.join('');
  document.getElementById('OU_close_line').innerHTML=oOpt.join('');
}

/* ===== 亞洲盤搜尋 ===== */
function asianSearch(){
  const [ohMin,ohMax]=rng('AH_oh_exact','AH_oh_err');
  const [oaMin,oaMax]=rng('AH_oa_exact','AH_oa_err');
  const [chMin,chMax]=rng('AH_ch_exact','AH_ch_err');
  const [caMin,caMax]=rng('AH_ca_exact','AH_ca_err');
  const openHd=document.getElementById('AH_open_hand').value;
  const closeHd=document.getElementById('AH_close_hand').value;

  const res=AH.filter(r=>{
    if(openHd && r.AH_open_handicap!=openHd)return false;
    if(closeHd&& r.AH_close_handicap!=closeHd)return false;
    if(ohMin!==null&&(r.AH_open_home_odds<ohMin||r.AH_open_home_odds>ohMax))return false;
    if(oaMin!==null&&(r.AH_open_away_odds<oaMin||r.AH_open_away_odds>oaMax))return false;
    if(chMin!==null&&(r.AH_close_home_odds<chMin||r.AH_close_home_odds>chMax))return false;
    if(caMin!==null&&(r.AH_close_away_odds<caMin||r.AH_close_away_odds>caMax))return false;
    return true;
  });
  render(res,'ahTbl','ahStat','result');
}

/* ===== OU 搜尋 ===== */
function ouSearch(){
  const [ooMin,ooMax]=rng('OU_oo_exact','OU_oo_err');
  const [ouMin,ouMax]=rng('OU_ou_exact','OU_ou_err');
  const [coMin,coMax]=rng('OU_co_exact','OU_co_err');
  const [cuMin,cuMax]=rng('OU_cu_exact','OU_cu_err');
  const lineO=document.getElementById('OU_open_line').value;
  const lineC=document.getElementById('OU_close_line').value;
  const res=OU.filter(r=>{
    if(lineO&&r.OU_open_line!=lineO)return false;
    if(lineC&&r.OU_close_line!=lineC)return false;
    if(ooMin!==null&&(r.OU_open_over_odds<ooMin||r.OU_open_over_odds>ooMax))return false;
    if(ouMin!==null&&(r.OU_open_under_odds<ouMin||r.OU_open_under_odds>ouMax))return false;
    if(coMin!==null&&(r.OU_close_over_odds<coMin||r.OU_close_over_odds>coMax))return false;
    if(cuMin!==null&&(r.OU_close_under_odds<cuMin||r.OU_close_under_odds>cuMax))return false;
    return true;
  });
  render(res,'ouTbl','ouStat','OU_result');
}

/* ===== 歐洲盤搜尋 ===== */
function euroSearch(){
  const [ohMin,ohMax]=rng('EU_oh_exact','EU_oh_err');
  const [odMin,odMax]=rng('EU_od_exact','EU_od_err');
  const [oaMin,oaMax]=rng('EU_oa_exact','EU_oa_err');
  const [chMin,chMax]=rng('EU_ch_exact','EU_ch_err');
  const [cdMin,cdMax]=rng('EU_cd_exact','EU_cd_err');
  const [caMin,caMax]=rng('EU_ca_exact','EU_ca_err');
  const res=EU.filter(r=>{
    if(ohMin!==null&&(r.EU_open_home_odds<ohMin||r.EU_open_home_odds>ohMax))return false;
    if(odMin!==null&&(r.EU_open_draw_odds<odMin||r.EU_open_draw_odds>odMax))return false;
    if(oaMin!==null&&(r.EU_open_away_odds<oaMin||r.EU_open_away_odds>oaMax))return false;
    if(chMin!==null&&(r.EU_close_home_odds<chMin||r.EU_close_home_odds>chMax))return false;
    if(cdMin!==null&&(r.EU_close_draw_odds<cdMin||r.EU_close_draw_odds>cdMax))return false;
    if(caMin!==null&&(r.EU_close_away_odds<caMin||r.EU_close_away_odds>caMax))return false;
    return true;
  });
  render(res,'euTbl','euStat','EU_result');
}

/* ===== 渲染表格 + 圓餅 ===== */
function render(arr,tblId,statId,flag){
  const th=document.getElementById(tblId).querySelector('thead');
  const tb=document.getElementById(tblId).querySelector('tbody');
  if(!arr.length){tb.innerHTML='';th.innerHTML='';document.getElementById(statId).innerHTML='(無結果)';return;}
  const keys=Object.keys(arr[0]);
  th.innerHTML='<tr>'+keys.map(k=>`<th>${k}</th>`).join('')+'</tr>';
  tb.innerHTML=arr.map(r=>'<tr>'+keys.map(k=>`<td>${r[k]}</td>`).join('')+'</tr>').join('');
  document.getElementById(statId).innerHTML=`共 ${arr.length} 筆資料`;
}
</script>
</body></html>
